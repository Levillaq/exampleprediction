import random
from datetime import datetime
from .models import ZodiacSign

# Словарь предсказаний для каждого знака зодиака
PREDICTIONS = {
    ZodiacSign.ARIES: [
        "Сегодня ваша энергия будет на пике! Используйте её для достижения важных целей.",
        "Звёзды советуют быть более терпеливым в отношениях с близкими людьми.",
        "Отличный день для новых начинаний. Ваша инициатива будет вознаграждена.",
        "Будьте осторожны с финансовыми решениями. Лучше отложить крупные покупки.",
        "Ваша харизма сегодня особенно сильна. Используйте это в деловых переговорах."
    ],
    ZodiacSign.TAURUS: [
        "Сегодня особенно важно уделить время своему здоровью и отдыху.",
        "Финансовая стабильность приближается. Продолжайте работать над своими целями.",
        "В любовных отношениях ожидается приятный сюрприз.",
        "Ваша настойчивость скоро принесёт плоды. Не сдавайтесь!",
        "Отличный день для творчества и самовыражения."
    ],
    ZodiacSign.GEMINI: [
        "Сегодня ваше общение будет особенно продуктивным. Заводите новые знакомства!",
        "Переменчивость настроения может помешать важным решениям. Будьте внимательны.",
        "Удачный день для обучения и получения новых знаний.",
        "В семейных отношениях возможны приятные изменения.",
        "Ваша интуиция сегодня работает на отлично. Доверьтесь ей."
    ],
    ZodiacSign.CANCER: [
        "Сегодня особенно важно прислушаться к своим эмоциям и чувствам.",
        "Семья и дом требуют вашего внимания. Не пренебрегайте близкими.",
        "Ваша забота о других вернётся к вам троекратно.",
        "Хороший день для решения старых проблем и конфликтов.",
        "Доверьтесь своей интуиции в принятии важных решений."
    ],
    ZodiacSign.LEO: [
        "Сегодня вы будете в центре внимания! Используйте это с умом.",
        "Ваши лидерские качества помогут решить сложную ситуацию.",
        "В творческих проектах ожидается значительный прорыв.",
        "Будьте щедрыми, но не забывайте о собственных интересах.",
        "Романтические отношения выйдут на новый уровень."
    ],
    ZodiacSign.VIRGO: [
        "Ваше внимание к деталям сегодня будет особенно ценным.",
        "Отличный день для планирования и организации дел.",
        "Здоровье требует внимания. Не игнорируйте сигналы организма.",
        "В работе возможны значительные достижения благодаря вашей точности.",
        "Помощь другим принесёт неожиданную пользу и вам."
    ],
    ZodiacSign.LIBRA: [
        "Сегодня важно найти баланс между работой и личной жизнью.",
        "Ваше чувство справедливости поможет разрешить спорную ситуацию.",
        "В отношениях наступает период гармонии и понимания.",
        "Красота и искусство принесут особое вдохновение.",
        "Партнёрство в делах обещает быть очень успешным."
    ],
    ZodiacSign.SCORPIO: [
        "Ваша интуиция сегодня невероятно сильна. Доверьтесь ей полностью.",
        "Глубокие изменения в жизни начинаются именно сегодня.",
        "В отношениях возможна эмоциональная интенсивность. Будьте мудры.",
        "Финансовые вопросы требуют серьёзного подхода и анализа.",
        "Ваша способность к трансформации поможет преодолеть любые препятствия."
    ],
    ZodiacSign.SAGITTARIUS: [
        "Сегодня отличный день для путешествий и новых открытий!",
        "Ваш оптимизм заразителен и помогает окружающим.",
        "Образование и самосовершенствование принесут неожиданные возможности.",
        "Философские размышления приведут к важным выводам.",
        "Свобода и независимость сегодня особенно важны для вас."
    ],
    ZodiacSign.CAPRICORN: [
        "Ваша целеустремлённость сегодня поможет достичь важной цели.",
        "Карьерные вопросы требуют серьёзного и ответственного подхода.",
        "Традиции и семейные ценности играют важную роль в принятии решений.",
        "Терпение и упорство скоро принесут заслуженные плоды.",
        "Ваш практичный подход к жизни будет особенно ценен сегодня."
    ],
    ZodiacSign.AQUARIUS: [
        "Ваша оригинальность и креативность откроют новые возможности.",
        "Дружба и социальные связи играют ключевую роль в сегодняшних событиях.",
        "Технологии и инновации принесут неожиданные решения проблем.",
        "Ваша независимость мышления поможет найти уникальный выход.",
        "Гуманитарные вопросы требуют вашего внимания и участия."
    ],
    ZodiacSign.PISCES: [
        "Сегодня ваша интуиция и эмпатия будут особенно сильными.",
        "Творчество и искусство принесут глубокое удовлетворение.",
        "Духовные вопросы требуют вашего внимания и размышлений.",
        "В отношениях важна эмоциональная близость и понимание.",
        "Ваша способность к состраданию поможет кому-то в трудную минуту."
    ]
}

def generate_prediction_for_sign(zodiac_sign: ZodiacSign) -> str:
    """Генерация случайного предсказания для знака зодиака"""
    if zodiac_sign not in PREDICTIONS:
        return "Звёзды сегодня молчат, но завтра обязательно откроют свои секреты."
    
    predictions_list = PREDICTIONS[zodiac_sign]
    
    # Используем дату для создания псевдослучайности (одинаковое предсказание для одного дня)
    today = datetime.now().date()
    seed = hash(f"{zodiac_sign}_{today}")
    random.seed(seed)
    
    return random.choice(predictions_list)

def get_zodiac_info(zodiac_sign: ZodiacSign) -> dict:
    """Получение информации о знаке зодиака"""
    zodiac_info = {
        ZodiacSign.ARIES: {
            "name": "aries",
            "title": "Овен",
            "emoji": "♈",
            "element": "Огонь",
            "dates": "21 марта — 19 апреля"
        },
        ZodiacSign.TAURUS: {
            "name": "taurus",
            "title": "Телец",
            "emoji": "♉",
            "element": "Земля",
            "dates": "20 апреля — 20 мая"
        },
        ZodiacSign.GEMINI: {
            "name": "gemini",
            "title": "Близнецы",
            "emoji": "♊",
            "element": "Воздух",
            "dates": "21 мая — 20 июня"
        },
        ZodiacSign.CANCER: {
            "name": "cancer",
            "title": "Рак",
            "emoji": "♋",
            "element": "Вода",
            "dates": "21 июня — 22 июля"
        },
        ZodiacSign.LEO: {
            "name": "leo",
            "title": "Лев",
            "emoji": "♌",
            "element": "Огонь",
            "dates": "23 июля — 22 августа"
        },
        ZodiacSign.VIRGO: {
            "name": "virgo",
            "title": "Дева",
            "emoji": "♍",
            "element": "Земля",
            "dates": "23 августа — 22 сентября"
        },
        ZodiacSign.LIBRA: {
            "name": "libra",
            "title": "Весы",
            "emoji": "♎",
            "element": "Воздух",
            "dates": "23 сентября — 22 октября"
        },
        ZodiacSign.SCORPIO: {
            "name": "scorpio",
            "title": "Скорпион",
            "emoji": "♏",
            "element": "Вода",
            "dates": "23 октября — 21 ноября"
        },
        ZodiacSign.SAGITTARIUS: {
            "name": "sagittarius",
            "title": "Стрелец",
            "emoji": "♐",
            "element": "Огонь",
            "dates": "22 ноября — 21 декабря"
        },
        ZodiacSign.CAPRICORN: {
            "name": "capricorn",
            "title": "Козерог",
            "emoji": "♑",
            "element": "Земля",
            "dates": "22 декабря — 19 января"
        },
        ZodiacSign.AQUARIUS: {
            "name": "aquarius",
            "title": "Водолей",
            "emoji": "♒",
            "element": "Воздух",
            "dates": "20 января — 18 февраля"
        },
        ZodiacSign.PISCES: {
            "name": "pisces",
            "title": "Рыбы",
            "emoji": "♓",
            "element": "Вода",
            "dates": "19 февраля — 20 марта"
        }
    }
    
    return zodiac_info.get(zodiac_sign, {
        "name": "unknown",
        "title": "Неизвестный",
        "emoji": "❓",
        "element": "Неизвестно",
        "dates": "Неизвестно"
    }) 